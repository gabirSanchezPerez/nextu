"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var nextHandle = 1;
var tasksByHandle = {};
function runIfPresent(handle) {
    var cb = tasksByHandle[handle];
    if (cb) {
        cb();
    }
}
exports.Immediate = {
    setImmediate: function (cb) {
        var handle = nextHandle++;
        tasksByHandle[handle] = cb;
        Promise.resolve().then(function () { return runIfPresent(handle); });
        return handle;
    },
    clearImmediate: function (handle) {
        delete tasksByHandle[handle];
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1tZWRpYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiSW1tZWRpYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0FBRW5CLElBQU0sYUFBYSxHQUFxQyxFQUFFLENBQUM7QUFFM0QsU0FBUyxZQUFZLENBQUMsTUFBYztJQUNsQyxJQUFNLEVBQUUsR0FBRyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDakMsSUFBSSxFQUFFLEVBQUU7UUFDTixFQUFFLEVBQUUsQ0FBQztLQUNOO0FBQ0gsQ0FBQztBQUVZLFFBQUEsU0FBUyxHQUFHO0lBQ3ZCLFlBQVksRUFBWixVQUFhLEVBQWM7UUFDekIsSUFBTSxNQUFNLEdBQUcsVUFBVSxFQUFFLENBQUM7UUFDNUIsYUFBYSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUMzQixPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLGNBQU0sT0FBQSxZQUFZLENBQUMsTUFBTSxDQUFDLEVBQXBCLENBQW9CLENBQUMsQ0FBQztRQUNuRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRUQsY0FBYyxFQUFkLFVBQWUsTUFBYztRQUMzQixPQUFPLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMvQixDQUFDO0NBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImxldCBuZXh0SGFuZGxlID0gMTtcblxuY29uc3QgdGFza3NCeUhhbmRsZTogeyBbaGFuZGxlOiBzdHJpbmddOiAoKSA9PiB2b2lkIH0gPSB7fTtcblxuZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZTogbnVtYmVyKSB7XG4gIGNvbnN0IGNiID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICBpZiAoY2IpIHtcbiAgICBjYigpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBJbW1lZGlhdGUgPSB7XG4gIHNldEltbWVkaWF0ZShjYjogKCkgPT4gdm9pZCk6IG51bWJlciB7XG4gICAgY29uc3QgaGFuZGxlID0gbmV4dEhhbmRsZSsrO1xuICAgIHRhc2tzQnlIYW5kbGVbaGFuZGxlXSA9IGNiO1xuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gcnVuSWZQcmVzZW50KGhhbmRsZSkpO1xuICAgIHJldHVybiBoYW5kbGU7XG4gIH0sXG5cbiAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICB9LFxufTtcbiJdfQ==